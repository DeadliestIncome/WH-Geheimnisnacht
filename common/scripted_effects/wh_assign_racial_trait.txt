assign_racial_trait = {
	#First remove any existing racial trait
	remove_trait = creature_human
	remove_trait = creature_elf
	remove_trait = creature_dwarf
	remove_trait = creature_chaos_dwarf
	remove_trait = creature_halfling
	remove_trait = creature_orc
	remove_trait = creature_goblin
	remove_trait = creature_snotling
	remove_trait = creature_amazon
	remove_trait = creature_nehekharan
	remove_trait = creature_skaven
	remove_trait = creature_ogre
	remove_trait = creature_beastman
	remove_trait = creature_skink

	#Then add correct trait for graphical culture.
	if = {
		limit = {
			OR = {
						graphical_culture = westerngfx
						graphical_culture = easterngfx
						graphical_culture = muslimgfx
						graphical_culture = frankishgfx
						graphical_culture = englishgfx
						graphical_culture = germangfx
						graphical_culture = occitangfx
						graphical_culture = southerngfx
						graphical_culture = celticgfx
						graphical_culture = norsegfx
						graphical_culture = saxongfx
						graphical_culture = normangfx
						graphical_culture = easternslavicgfx
						graphical_culture = westernslavicgfx
						graphical_culture = byzantinegfx
						graphical_culture = ugricgfx
						graphical_culture = arabicgfx
						graphical_culture = turkishgfx
						graphical_culture = mongolgfx
						graphical_culture = africangfx
						graphical_culture = westafricangfx
						graphical_culture = andalusiangfx
						graphical_culture = persiangfx
						graphical_culture = empiregfx
						graphical_culture = sylvaniangfx
						graphical_culture = kurgangfx
						graphical_culture = arabyangfx
						graphical_culture = northempiregfx
						graphical_culture = tileagfx
						graphical_culture = estileangfx
						graphical_culture = hunggfx
						graphical_culture = southarabyangfx
						graphical_culture = northmangfx
						graphical_culture = sartosantileangfx
						graphical_culture = bretonniangfx
						graphical_culture = nehekkagfx
						graphical_culture = cumangfx
						graphical_culture = livinglahmiangfx
						graphical_culture = italiangfx
						graphical_culture = reiklandergfx
						graphical_culture = witchhuntergfx
						graphical_culture = blooddragonsgfx
						graphical_culture = striganygfx
						graphical_culture = sartosangfx
						graphical_culture = strygangfx
						graphical_culture = cathayangfx
						graphical_culture = livingjadegfx
						graphical_culture = wasaigfx
						graphical_culture = cophicgfx
						graphical_culture = tevarigfx
						graphical_culture = medeangfx
						graphical_culture = arabyansartosangfx
						graphical_culture = norscangfx
						graphical_culture = norscansartosangfx
						graphical_culture = kislevitegfx
						graphical_culture = ropsmanngfx
						graphical_culture = tileangfx
						graphical_culture = estaliangfx
						graphical_culture = mykengfx
						graphical_culture = albiongfx
						AND = {
							is_female = no
							graphical_culture = amazongfx
						}
				}
		}
		add_trait = creature_human
		# set_character_flag = page_1
		# set_character_flag = page_religion_1
		# character_event = { id = DR_startup.10 }
		# character_event = { id = DR_startup.11 }
	}
	if = {
		limit = {
				is_female = yes
				graphical_culture = amazongfx

		}
		add_trait = creature_amazon
		culture = amazon_main
		religion = amazon
	}
	if = {
		limit = {
			OR = {
				graphical_culture = asurgfx
				graphical_culture = caledoriangfx
				graphical_culture = nagarythiangfx
			}
		}
		add_trait = creature_elf
		culture = eatainian
		religion = cadai
		if = { limit = { is_female = yes
						age = 12
						NOT = { age = 45 } }
					add_trait = elven_maiden }
				if = { limit = { is_female = no
						age = 12
						NOT = { age = 45 } }
					add_trait = elven_scion }
				set_character_flag = page_1

		# character_event = { id = DR_startup.12 }
	}
	if = {
		limit = {
				graphical_culture = druchiigfx
		}
		add_trait = creature_elf
		culture = naggarondi
		religion = cytharai
		if = { limit = { is_female = yes
						age = 12
						NOT = { age = 45 } }
					add_trait = elven_maiden }
				if = { limit = { is_female = no
						age = 12
						NOT = { age = 45 } }
					add_trait = elven_scion }
			# set_character_flag = page_1
		# set_character_flag = page_religion_1
		# character_event = { id = DR_startup.13 }
		# character_event = { id = DR_startup.14 }
	}
	if = {
		limit = {
				graphical_culture = asraigfx
		}
		add_trait = creature_elf
		culture = loren
		religion = asrai_cadai
		if = { limit = { is_female = yes
						age = 12
						NOT = { age = 45 } }
					add_trait = elven_maiden }
				if = { limit = { is_female = no
						age = 12
						NOT = { age = 45 } }
					add_trait = elven_scion }
	}
	if = {
		limit = {
			OR = {
						graphical_culture = dwarfgfx
						graphical_culture = imperialdwarfgfx
						graphical_culture = norsedwarfgfx
						graphical_culture = olddwarfgfx
						graphical_culture = norseolddwarfgfx
						graphical_culture = slayerdwarfgfx
					}
		}
		add_trait = creature_dwarf
		culture = dwarf_main
		religion = ancestor_gods
		if = { #Dwarfs under the age of 75 are beardlings
				limit = {
					culture_group = dwarf_group
					NOT = {
						trait = beardling
						age = 75
					}
				}
				add_trait = beardling
			}
			if = { #Some dwarfs become warriors
				limit = {
					culture_group = dwarf_group
					age = 75
					is_female = no
					NOT = {
						trait = thunderer
						trait = quarreller
						trait = dwarf_warrior
						trait = hammerer
						trait = ironbreaker
						trait = longbeard
						has_character_flag = dwarf_did_not_become_warrior
						has_character_flag = becoming_thunderer
						has_character_flag = becoming_quarreller
						has_character_flag = becoming_dwarf_warrior
					}
				}
				random_list = {
					15 = {
						modifier = {
							factor = 4
							martial = 10
							NOT = {
								trait = craven
							}
						}
						add_trait = dwarf_warrior
					}
					5 = {
						modifier = {
							factor = 4
							martial = 10
							NOT = {
								trait = craven
							}
						}
						add_trait = quarreller
					}
					5 = {
						modifier = {
							factor = 4
							martial = 10
							NOT = {
								trait = craven
							}
						}
							add_trait = thunderer
					}
					75 = {
						modifier = {
							factor = 0
							martial = 10
							NOT = {
								trait = craven
							}
						}
						set_character_flag = dwarf_did_not_become_warrior
					}
				}
			}
			# set_character_flag = page_1
		# set_character_flag = page_religion_1
		# character_event = { id = DR_startup.15 }
		# character_event = { id = DR_startup.16 }
	}
	if = {
		limit = {
			OR = {
						graphical_culture = chaosdwarfgfx
						graphical_culture = oldchaosdwarfgfx
			}
		}
		add_trait = creature_chaos_dwarf
		culture = dwarf_chaos
		religion = hashut
	}
	if = {
		limit = {
			 graphical_culture = hobbitsgfx
		}
		add_trait = creature_halfling
		culture = mootlander
		religion = halfling_gods
	}
	if = {
		limit = {
			 graphical_culture = miyangfx
		}
		add_trait = creature_halfling
		culture = miyan
		religion = kukaili
	}
	if = {
		limit = {
					OR = {
						graphical_culture = orcgfx
						graphical_culture = blackorcgfx
					}
					is_female = no
				}
				add_trait = creature_orc
				culture = orc_main
				religion = greenskin_gods
				if = {
					limit = { graphical_culture = blackorcgfx }
					add_trait = black_orc_trait
				}
				random_list = {
					35 = { add_trait = orc_small }
					45 = { add_trait = orc_average }
					15 = { add_trait = orc_large }
					5 = { add_trait = orc_huge }
				}
				random_list = {
					50 = { add_trait = greenskin_gods_gork }
					50 = { add_trait = greenskin_gods_mork }
				}
				capital_holding = {
					convert_to = tribal
					refill_holding_levy = yes
				}
				capital_scope  = {
					any_province_holding = {
						limit = {
							is_capital = no
						}
							destroy_settlement = THIS
					}
					culture = ROOT
					religion = ROOT
				}
	}

	if = {
		limit = {
					graphical_culture = savageorcgfx
					is_female = no
				}
				add_trait = creature_orc
				culture = orc_savage
				religion = greenskin_gods
				random_list = {
					35 = { add_trait = orc_small }
					45 = { add_trait = orc_average }
					15 = { add_trait = orc_large }
					5 = { add_trait = orc_huge }
				}
				random_list = {
					50 = { add_trait = greenskin_gods_gork }
					50 = { add_trait = greenskin_gods_mork }
				}
				capital_holding = {
					convert_to = tribal
					refill_holding_levy = yes
				}
				capital_scope  = {
					any_province_holding = {
						limit = {
							is_capital = no
						}
							destroy_settlement = THIS
					}
					culture = ROOT
					religion = ROOT
				}
			}
	if = { #Goblins
				limit = {
					graphical_culture = goblingfx
					is_female = no
				}
				add_trait = creature_goblin
				culture = goblin_main
				religion = greenskin_gods

				random_list = {
					45 = { add_trait = goblin_small }
					40 = { add_trait = goblin_average }
					10 = { add_trait = goblin_large }
					5 = { add_trait = goblin_huge }
				}
				if = {
					limit = {
						religion = greenskin_gods
					}
					random_list = {
						50 = { add_trait = greenskin_gods_gork }
						50 = { add_trait = greenskin_gods_mork }
					}
				}
				capital_holding = {
					convert_to = tribal
					refill_holding_levy = yes
				}
				capital_scope  = {
					any_province_holding = {
						limit = {
							is_capital = no
						}
							destroy_settlement = THIS
					}
					culture = ROOT
					religion = ROOT
				}

			}
		if = { #Goblins
				limit = {
					graphical_culture = forestgoblingfx
					is_female = no
				}
				add_trait = creature_goblin
				culture = goblin_forest
				religion = spider_god

				random_list = {
					45 = { add_trait = goblin_small }
					40 = { add_trait = goblin_average }
					10 = { add_trait = goblin_large }
					5 = { add_trait = goblin_huge }
				}
				if = {
					limit = {
						religion = greenskin_gods
					}
					random_list = {
						50 = { add_trait = greenskin_gods_gork }
						50 = { add_trait = greenskin_gods_mork }
					}
				}
				capital_holding = {
					convert_to = tribal
					refill_holding_levy = yes
				}
				capital_scope  = {
					any_province_holding = {
						limit = {
							is_capital = no
						}
							destroy_settlement = THIS
					}
					culture = ROOT
					religion = ROOT
				}

			}
		if = { #Goblins
				limit = {
					graphical_culture = nightgoblingfx
					is_female = no
				}
				add_trait = creature_goblin
				culture = goblin_night
				religion = greenskin_gods

				random_list = {
					45 = { add_trait = goblin_small }
					40 = { add_trait = goblin_average }
					10 = { add_trait = goblin_large }
					5 = { add_trait = goblin_huge }
				}
				if = {
					limit = {
						religion = greenskin_gods
					}
					random_list = {
						50 = { add_trait = greenskin_gods_gork }
						50 = { add_trait = greenskin_gods_mork }
					}
				}
				capital_holding = {
					convert_to = tribal
					refill_holding_levy = yes
				}
				capital_scope  = {
					any_province_holding = {
						limit = {
							is_capital = no
						}
							destroy_settlement = THIS
					}
					culture = ROOT
					religion = ROOT
				}

			}
	if = { #Snotlings
				limit = {
					OR = {
						graphical_culture = goblingfx
						graphical_culture = forestgoblingfx
						graphical_culture = nightgoblingfx
						graphical_culture = orcgfx
						graphical_culture = savageorcgfx
						graphical_culture = blackorcgfx
					}
					is_female = yes
				}
				add_trait = creature_snotling
	}
	if = { #Nehekharans
				limit = {
					graphical_culture = nehekharangfx
				}
				add_trait = creature_nehekharan
				add_trait = khemri_tomb_king
				culture = nehekharan
				religion = nehekharan_gods

	}
	if = { #Skaven
				limit = {
					OR = {
						graphical_culture = skavengfx
						graphical_culture = skavenblackgfx
					}
				}
				add_trait = creature_skaven
				culture = skaven_main
				religion = horned_rat
				if = { limit = { graphical_culture = skavenblackgfx }
						add_trait = black_skaven }
				capital_holding = {
					convert_to = CITY
					refill_holding_levy = yes
				}
				capital_scope  = {
						culture = ROOT
						religion = ROOT
				}
	}
	if = { #Beastman
				limit = {	graphical_culture = beastmangfx }
				add_trait = creature_beastman
				culture = beastman_main
				religion = chaos
				if = {
					limit = {
						is_female = no
						NOT = { trait = horns_none }
						NOT = { trait = horns_small }
						NOT = { trait = horns_average }
						NOT = { trait = horns_big }
					}
					random_list = {
						10 = { add_trait = horns_none }
						40 = { add_trait = horns_small }
						45 = { add_trait = horns_average }
						5 = { add_trait = horns_big }
					}
				}
				primary_title = {
						set_title_nomad = { title = THIS status = yes }
				}
				capital_holding = {
					convert_to = nomad
					refill_holding_levy = yes
				}
				capital_scope  = {
					any_province_holding = {
						limit = {
							is_capital = no
						}
							destroy_settlement = THIS
					}
					culture = ROOT
					religion = ROOT
				}
				population = 5000
				manpower = 2000

	}
	if = { #Ogre
				limit = {
					graphical_culture = ogresgfx
				}
				add_trait = creature_ogre
				culture = ogre_main
				religion = great_maw

				primary_title = {
						set_title_nomad = { title = THIS status = yes }
				}
				capital_holding = {
					convert_to = nomad
					refill_holding_levy = yes
				}
				capital_scope  = {
					any_province_holding = {
						limit = {
							is_capital = no
						}
							destroy_settlement = THIS
					}
					culture = ROOT
					religion = ROOT
				}
				population = 5000
				manpower = 2000

			}
	if = { #Von Carstein vampire
				limit = {
					OR = {
						graphical_culture = carsteingfx
						graphical_culture = carsteineverkidgfx
					}
				}
				add_trait = creature_human
				add_trait = vampire_carstein_visible

				culture = sylvanian
				religion = vampiric
			}
	if = { #Von Carstein vampire
				limit = {
					OR = {
						graphical_culture = lahmiangfx
						graphical_culture = lahmianeverkidgfx
					}
				}
				add_trait = creature_human
				add_trait = vampire_lahmian_visible

				culture = lahmian
				religion = vampiric
	}
	if = { #Von Carstein vampire
				limit = {
					graphical_culture = blooddragonsvampiregfx
				}
				add_trait = creature_human
				add_trait = vampire_blood_visible

				culture = blooddragons_culture
				religion = vampiric
	}
	if = { #Von Carstein vampire
				limit = {
					graphical_culture = strigoigfx
				}
				add_trait = creature_human
				add_trait = vampire_strigoi_visible

				culture = strygan
				religion = vampiric
	}
	if = { #Von Carstein vampire
				limit = {
					graphical_culture = necrarchgfx
				}
				add_trait = creature_human
				add_trait = vampire_necrarch_visible

				culture = strygan
				religion = vampiric
	}
	if = { #Von Carstein vampire
				limit = {
					graphical_culture = jadegfx
				}
				add_trait = creature_human
				add_trait = vampire_jade_visible

				culture = living_jade
				religion = vampiric
	}
	if = { #Von Carstein vampire
				limit = {
					graphical_culture = mahtmasigfx
				}
				add_trait = creature_human
				add_trait = vampire_mahtmasi_visible

				culture=bayaji
				religion = shadowmen
	}
	if = { #Skink Lizardmen
				limit = {
					graphical_culture = lizardmangfx
					is_female = no
				}
				add_trait = creature_skink

				culture = lizardman
				religion = old_ones

	}
}
